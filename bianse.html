<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		.box{
			margin: 0 auto;
			padding:0;
			border:1px solid #0f0;
			width:600px;
			height:600px;
		}
	</style>
	<script type="text/javascript" src="../jquery-1.12.0.js"></script>
	<script type="text/javascript">
		$(function(){
			var myCanvas = $('#mycanvas')[0];
			var cxt = myCanvas.getContext('2d');//console.log(myCanvas);
			setInterval(function(){
				//清空画布
				cxt.clearRect(0,0,600,600);
				//随机色
				var str = ["a","b","c","d","e","f","1","2","3","4","5","6","7","8","9","0"];
				var strcolor = "#";
				var strcolor1 = "#";
				var strcolor2 = "#";
				for(var i = 0; i < 6;i++){
					strcolor += str[parseInt(Math.random()*str.length)];
					strcolor1 += str[parseInt(Math.random()*str.length)];
					strcolor2 += str[parseInt(Math.random()*str.length)];
				}
				//画圆(表盘)
				cxt.lineWidth = 35;
				//线向渐变色
				//径向渐变
				cxt.strokeStyle = bg(cxt,100,100,500,100,"pink",strcolor1,"pink");
				cxt.fillStyle = bg(cxt,100,100,500,100,strcolor1,"pink",strcolor1);
				cxt.beginPath();
				cxt.arc(300,300,200,0,Math.PI*2,false);
				cxt.fill();
				cxt.stroke();
				cxt.closePath();
 				//第二圆
 				cxt.beginPath();
 				cxt.lineWidth = 85;
 				cxt.strokeStyle = bg(cxt,100,100,500,100,"#8cd6f5",strcolor,"#8cd6f5");
 				cxt.fillStyle = bg(cxt,100,100,500,100,strcolor,strcolor2,strcolor1);
 				cxt.arc(300,300,100,0,Math.PI*2,false);
 				cxt.fill();	
 				cxt.stroke();
 				cxt.closePath();

				//设置时针刻度
				//时针刻度  for(var i=0; i<12; i++){  cxt.save();   //设置旋转环境  //设置时针的样式  cxt.lineWidth=7;  cxt.strokeStyle="#000";    cxt.translate(250,250);//设置异次元空间的原点    cxt.rotate(30*Math.PI/180*i);//设置旋转角度  cxt.beginPath();  //画笔开始  cxt.moveTo(0,-170);   //画线， 从坐标0，-170开始  cxt.lineTo(0,-190);   //到坐标0，-190结束  cxt.stroke();   //绘图  cxt.closePath();  cxt.restore();  //将旋转之后的元素放回原画布  }
				for(var i = 0;i<12;i++){
					timer(cxt,7,"#ffd4a3",30,i,-170,-190);

				};
				//设置分针刻度
				for(var i = 0; i< 60;i++){
					if(i % 5 == 0){
						continue;
					};
					timer(cxt,4,"#97f4e8",6,i,-180,-190);
				};
				//设置时间
				//获取时间  var now = new Date();     //定义时间  var sec = now.getSeconds();  //获取秒  var minute = now.getMinutes();   //获取分钟  var hour = now.getHours();    //获取小时  //小时必须获取浮点类型，产生偏移（小时+分钟比）  hour = hour + minute/60;    //将24小时转换为12小时  hour=hour>12?hour-12:hour;
				//获取时间
				var now = new Date();
				//秒
				var sec = now.getSeconds();
				//分
				var minute = now.getMinutes();
				//时
				var hour = now.getHours();
				hour=hour+minute/60;
				hour = hour>12?hour-12:hour;
				//设置时针
				line(cxt,8,hour*30,-120,bg(cxt,0,0,0,-120,"#573bcd",strcolor2,"#573bcd"));
				//设置分针
				line(cxt,5,minute*6,-150,bg(cxt,0,0,0,-120,"#f51454",strcolor1,"#f51454"));
				//设置秒针
				line(cxt,2,sec*6,-180,bg(cxt,0,0,0,-120,"#f38712",strcolor,"#f38712"));
				//写入文字
				for(var i = 0; i < 12;i++){
					var j = i;
					if(i == 0){
						j = 12;
					}
					cxt.save();
					cxt.translate(300,300);
					cxt.rotate(30*Math.PI/180*j);
					cxt.beginPath();
					cxt.moveTo(0,0);
					cxt.fillStyle ="#3c2002";
					cxt.font = "22px 微软雅黑 ";
					//ctx.textBaseline="top";
					if(j >= 10){
						cxt.fillText(j,-12,-150);

					}else{
						cxt.fillText(j,-6,-150);
					}
					cxt.fill();
					cxt.closePath();
					cxt.restore();

				};
				//小圆
				cxt.beginPath();
				cxt.lineWidth = 2;
				cxt.strokeStyle = bg(cxt,300,300,200,200,"#000",strcolor2,"#000");
				cxt.fillStyle = "#fff";
				cxt.arc(300,300,8,0,Math.PI*2,false);
				cxt.fill();
				cxt.stroke();
				cxt.closePath();

			},1000);
			
		
			//线向渐变
			function bg(ene,x,y,x1,y1,color1,color2,color3){
				var bgcolor = ene.createLinearGradient(x,y,x1,y1);
				bgcolor.addColorStop(0,color1);
				bgcolor.addColorStop(0.5,color2);
				bgcolor.addColorStop(1,color3);
				return bgcolor;
			};

			//时针，分针刻度
			function timer(ctxs,linw,color1,du,is,y1,y2){
				ctxs.save()//设置旋转环境
				ctxs.lineWidth = linw;
				ctxs.strokeStyle = color1;
				ctxs.translate(300,300);//设置异次元空间的原点,往左是负数往右是正数 往上是负数 往下是正数
				ctxs.rotate(du*Math.PI/180*is);//设置旋转角度
				ctxs.beginPath();
				ctxs.moveTo(0,y1);
				ctxs.lineTo(0,y2);
				ctxs.stroke();
				ctxs.closePath();
				ctxs.restore();  //将旋转之后的元素放回原画布
			};
			//时针，分针，秒针
			function line(ctxs,linw,du,y,bgcol){
				var y = Number(y);
				ctxs.save()//设置旋转环境
				ctxs.lineWidth = linw;
				ctxs.translate(300,300);
				ctxs.rotate(du*Math.PI/180);//设置旋转角度
				//角
				ctxs.beginPath();
				ctxs.fillStyle = bgcol;	
				ctxs.moveTo(0,y-10);
				ctxs.lineTo(-5+(-linw),y+6);
				ctxs.lineTo(0,y);
				ctxs.lineTo(5+(linw),y+6);
				ctxs.fill();
				ctxs.closePath();
				//时针，分针，秒针
				ctxs.beginPath();
				ctxs.moveTo(0,20);
				ctxs.lineTo(0,y);
				ctxs.strokeStyle = bgcol;
				ctxs.stroke();
				ctxs.closePath();
				ctxs.restore();
			}
		});
	</script>
</head>
<body>
	<div class="box">
		<canvas width="600" height="600" style="border:1px solid #f00;" id="mycanvas"></canvas>
	</div>
</body>
</html>